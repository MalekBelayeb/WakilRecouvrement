@model IEnumerable<WakilRecouvrement.Domain.Entities.Formulaire>

@{
    ViewBag.Title = "";
}
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/js/tempusdominus-bootstrap-4.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.0.1/css/tempusdominus-bootstrap-4.min.css" />

<h2>Client a traité </h2>
<br />

<table class="table">
    <tr>

        <th>
            NumLot
        </th>

        <th>
            Compte
        </th>
        <th>
            NomClient
        </th>
        <th>
            TelPortable
        </th>
        <th>
            TelFixe
        </th>
        <th>
            SoldeDebiteur
        </th>
        <th>
            Agence
        </th>
        <th>
            Adresse
        </th>
        <th>
            Type
        </th>
        <th>
            Numero
        </th>

        <th></th>
    </tr>


    <tr>
        <td>
            @ViewBag.affectation.Lot.NumLot
        </td>

        <td>
            @ViewBag.affectation.Lot.Compte
        </td>
        <td>
            @ViewBag.affectation.Lot.NomClient
        </td>

        <td>
            @ViewBag.affectation.Lot.TelPortable
        </td>
        <td>
            @ViewBag.affectation.Lot.TelFixe
        </td>
        <td>
            @ViewBag.affectation.Lot.SoldeDebiteur
        </td>
        <td>
            @ViewBag.affectation.Lot.DescIndustry
        </td>
        <td>
            @ViewBag.affectation.Lot.Adresse
        </td>
        <td>
            @ViewBag.affectation.Lot.Type
        </td>
        <td>
            @ViewBag.affectation.Lot.Numero
        </td>

    </tr>


</table>


<h2>Historique d'activités</h2>
<br />

<table class="table">
    <tr>

        <th>
            @Html.DisplayNameFor(model => model.EtatClient)
        </th>

        <th>
            @Html.DisplayNameFor(model => model.DateRDV)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DateRDVReporte)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.TrancheSolde)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.DescriptionAutre)
        </th>


        <th></th>
    </tr>

    @foreach (var item in Model)
    {
<tr>
    <td>

        @Html.DisplayFor(modelItem => item.EtatClient)

    </td>

    <td>


        @if (item.DateRDV.ToString().Equals("01/01/0001 00:00:00"))
        {
            <text></text>
        }
        else
        {
            @Html.DisplayFor(modelItem => item.DateRDV)
        }


    </td>
    <td>

        @if (item.DateRDVReporte.ToString().Equals("01/01/0001 00:00:00"))
        {
            <text></text>
        }
        else
        {
            @Html.DisplayFor(modelItem => item.DateRDVReporte)
        }
    </td>
    <td>

        @Html.DisplayFor(modelItem => item.TrancheSolde)

    </td>
    <td>

        @Html.DisplayFor(modelItem => item.DescriptionAutre)

    </td>

</tr>
    }

</table>

<br />
<h2>Remplir Formulaire</h2>

@using (Html.BeginForm("CreerFormulaireNote", "Formulaire", FormMethod.Post))
{
    @Html.AntiForgeryToken()

<div class="form-horizontal">
    <hr />
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })


    <input name="id" type="text" value="@ViewBag.id" style="visibility:hidden">

    <div class="form-group">
        @Html.Label("EtatClient", "Note client", htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.DropDownList("EtatClient", ViewBag.TraiteList as SelectList, new { @class = "form-control", id = "dropdown" })
        </div>
    </div>

    <div class="form-group" id="autre">
        @Html.Label("DescriptionAutre", "Description", htmlAttributes: new { @class = "control-label col-md-2" })
        <div class="col-md-10">
            @Html.Editor("DescriptionAutre", new { htmlAttributes = new { @class = "form-control" } })
        </div>
    </div>


    <div id="datetimePickerRDV" class="form-group row">
        <label for="example-datetime-local-input" class="col-2 col-form-label">RDV pour le:</label>
        <div class="col-8">
            <input class="form-control" name="RDVDateTime" type="datetime-local" value="2011-08-19T13:45:00" id="example-datetime-local-input">
        </div>
    </div>

    <div id="datetimePickerRDVReporte" class="form-group row">
        <label for="example-datetime-local-input" class="col-2 col-form-label">RDV reporté pour le:</label>
        <div class="col-8">
            <input class="form-control" name="RDVReporteDateTime" type="datetime-local" value="2011-08-19T13:45:00" id="example-datetime-local-input">
        </div>
    </div>

    <div id="trancheSolde" class="form-group row">
        <label for="example-datetime-local-input" class="col-2 col-form-label">Tranche en TND:</label>
        <div class="col-8">
            
            <input name="soldetranche" type="number" min="0.000" max="any" step="0.01" value="1.000" id="exampleInputAmount" class="form-control" placeholder="Tranche">

        </div>
    </div>





    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" value="Confirmer" class="btn btn-default" />
        </div>
    </div>
</div>
}



<script>

    var datetimePicker = document.getElementById("datetimePicker")

    var dropdown = document.getElementById("dropdown");

    $(document).ready(function () {

        function hideAll() {

            $("#autre").hide();
            $("#datetimePickerRDVReporte").hide();
            $("#datetimePickerRDV").hide();
            $("#trancheSolde").hide();

        }
        hideAll()
        dropdown.onchange = function () {

            switch (dropdown.value) {
                case "INJOIGNABLE":
                    hideAll();

                    break;
                case "FAUX_NUM":
                    hideAll();

                    break;
                case "NRP":
                    hideAll();

                    break;
                case "RDV":
                    hideAll();
                    $("#datetimePickerRDV").show();

                    break;
                case "RDV_REPORTE":
                    hideAll();
                    $("#datetimePickerRDVReporte").show();

                    break;
                case "SOLDE":
                    hideAll();

                    break;
                case "REFUS_PAIEMENT":
                    hideAll();

                    break;
                case "A_VERIFIE":
                    hideAll();

                    break;
                case "RAPPEL":
                    hideAll();

                    break;
                case "RACCROCHE":
                    hideAll();

                    break;
                case "SOLDE_TRANCHE":
                    hideAll();
                    $("#trancheSolde").show();

                    break;
                case "AUTRE":
                    hideAll();
                    $("#autre").show();

                    break;
            }

        }


    })







</script>


@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
